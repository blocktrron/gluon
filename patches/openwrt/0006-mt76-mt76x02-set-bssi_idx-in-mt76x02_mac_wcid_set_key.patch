From: David Bauer <mail@david-bauer.net>
Date: Wed, 22 Jul 2020 22:54:14 +0200
Subject: mt76: mt76x02: set bssi_idx in mt76x02_mac_wcid_set_key

diff --git a/package/kernel/mt76/patches/001-bssi-idx.patch b/package/kernel/mt76/patches/001-bssi-idx.patch
new file mode 100644
index 0000000000000000000000000000000000000000..062dca380fa57a65900824e6f5a612f71ad60652
--- /dev/null
+++ b/package/kernel/mt76/patches/001-bssi-idx.patch
@@ -0,0 +1,22 @@
+From 3913b9321a2f70bf004eb2de64793a1b4f94623b Mon Sep 17 00:00:00 2001
+From: Lorenzo Bianconi <lorenzo@kernel.org>
+Date: Wed, 22 Jul 2020 19:49:51 +0200
+Subject: [PATCH] mt76: mt76x02: set bssi_idx in mt76x02_mac_wcid_set_key
+
+---
+ mt76x02_mac.c | 4 ++++
+ 1 file changed, 4 insertions(+)
+
+--- a/mt76x02_mac.c
++++ b/mt76x02_mac.c
+@@ -122,6 +122,10 @@ int mt76x02_mac_wcid_set_key(struct mt76
+ 	if (key) {
+ 		mt76_rmw_field(dev, MT_WCID_ATTR(idx), MT_WCID_ATTR_PAIRWISE,
+ 			       !!(key->flags & IEEE80211_KEY_FLAG_PAIRWISE));
++		mt76_rmw_field(dev, MT_WCID_ATTR(idx),
++			       MT_WCID_ATTR_BSS_IDX, idx & 0x7);
++		mt76_rmw_field(dev, MT_WCID_ATTR(idx),
++			       MT_WCID_ATTR_BSS_IDX_EXT, !!(idx & 0x8));
+ 
+ 		pn = atomic64_read(&key->tx_pn);
+ 
